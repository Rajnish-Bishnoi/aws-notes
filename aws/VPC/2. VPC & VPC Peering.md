# ☁️ AWS VPC & VPC Peering – Step-by-Step Guide

## 📝 Overview

**Amazon VPC (Virtual Private Cloud)** allows you to provision a logically isolated section of the AWS cloud.  
**VPC Peering** enables communication between two VPCs, allowing resources to communicate across networks as if they were on the same network.

---

## 1️⃣ What is a VPC?

### 🔍 Definition

A **VPC** is a virtual network dedicated to your AWS account. It is logically isolated from other virtual networks in the AWS cloud.

### ✅ Key Components

| Component       | Description                                              |
|------------------|----------------------------------------------------------|
| CIDR Block       | Defines IP address range (e.g., 10.0.0.0/16)             |
| Subnet           | Division of CIDR block across availability zones         |
| Route Table      | Controls traffic routing within and outside the VPC      |
| Internet Gateway | Enables internet access                                  |
| NAT Gateway      | Enables internet access for private subnets              |
| Security Groups  | Acts as virtual firewall for EC2 instances               |

---

## 2️⃣ VPC Peering

### 🔍 Definition

**VPC Peering** is a networking connection between two VPCs that enables traffic routing between them using **private IP addresses**.

- Works within the same AWS region or across regions (inter-region).
- Can be within the same AWS account or between different accounts.

### ✅ Use Cases

- Microservices hosted in different VPCs.
- Environment separation (Dev, Test, Prod) with selective access.
- Cross-account or cross-region access between teams or services.

---

## ⚙️ How to Set Up VPC Peering – Step-by-Step

### 🎯 Scenario

We’ll peer **VPC-A (10.0.0.0/16)** with **VPC-B (10.1.0.0/16)**  
Both in the same AWS region.

---

### 🔧 Step 1: Create Two VPCs

1. Go to **VPC Dashboard** → **Your VPCs** → **Create VPC**.
2. VPC-A:
   - Name: `VPC-A`
   - CIDR: `10.0.0.0/16`
3. VPC-B:
   - Name: `VPC-B`
   - CIDR: `10.1.0.0/16`

---

### 🔧 Step 2: Create Subnets and Launch EC2

- Create at least one subnet in each VPC (e.g., `10.0.1.0/24` and `10.1.1.0/24`).
- Launch an EC2 instance in each subnet for testing.

---

### 🔧 Step 3: Create VPC Peering Connection

1. Go to **VPC Dashboard** → **Peering Connections** → **Create Peering Connection**.
2. Fill in:
   - Name tag: `VPC-A-to-VPC-B`
   - Requester: `VPC-A`
   - Accepter: `VPC-B`
3. Click **Create Peering Connection**.

---

### 🔧 Step 4: Accept the Peering Request

1. Select the newly created peering request.
2. Click **Actions** → **Accept Request**.

---

### 🔧 Step 5: Update Route Tables

#### In VPC-A Route Table:
- Destination: `10.1.0.0/16`
- Target: `Peering Connection ID`

#### In VPC-B Route Table:
- Destination: `10.0.0.0/16`
- Target: `Peering Connection ID`

---

### 🔧 Step 6: Modify Security Groups

- Allow inbound traffic **from the other VPC's CIDR**.
- Example (on EC2 in VPC-A):
  - Inbound Rule:
    - Type: All traffic (or custom)
    - Source: `10.1.0.0/16`

---

### 🧪 Step 7: Test the Connection

1. SSH into EC2 in VPC-A.
2. Ping the private IP of EC2 in VPC-B:
   ```bash
   ping 10.1.1.10

AWS VPC and VPC Peering
├── VPC
│   ├── CIDR Block
│   ├── Subnets
│   ├── Route Table
│   ├── Internet Gateway
│   └── Security Groups
├── VPC Peering
│   ├── Definition: Private IP communication between VPCs
│   ├── Use Cases
│   │   ├── Microservices
│   │   ├── Cross-account
│   │   └── Multi-environment
│   ├── Setup
│   │   ├── Create VPCs
│   │   ├── Launch EC2s
│   │   ├── Create Peering
│   │   ├── Accept Request
│   │   ├── Update Route Tables
│   │   ├── Modify Security Groups
│   │   └── Test Connection
│   └── Notes
│       ├── No transitive routing
│       ├── CIDRs must not overlap
│       └── Inter-region supporte
---
## ✅ Summary
VPC is a virtual private network in AWS.

VPC Peering connects VPCs securely over AWS’s network.

Proper routing, security, and non-overlapping CIDRs are essential.

Works across regions and accounts.

