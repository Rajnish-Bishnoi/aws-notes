# â˜ï¸ AWS VPC & VPC Peering â€“ Step-by-Step Guide

## ğŸ“ Overview

**Amazon VPC (Virtual Private Cloud)** allows you to provision a logically isolated section of the AWS cloud.  
**VPC Peering** enables communication between two VPCs, allowing resources to communicate across networks as if they were on the same network.

---

## 1ï¸âƒ£ What is a VPC?

### ğŸ” Definition

A **VPC** is a virtual network dedicated to your AWS account. It is logically isolated from other virtual networks in the AWS cloud.

### âœ… Key Components

| Component       | Description                                              |
|------------------|----------------------------------------------------------|
| CIDR Block       | Defines IP address range (e.g., 10.0.0.0/16)             |
| Subnet           | Division of CIDR block across availability zones         |
| Route Table      | Controls traffic routing within and outside the VPC      |
| Internet Gateway | Enables internet access                                  |
| NAT Gateway      | Enables internet access for private subnets              |
| Security Groups  | Acts as virtual firewall for EC2 instances               |

---

## 2ï¸âƒ£ VPC Peering

### ğŸ” Definition

**VPC Peering** is a networking connection between two VPCs that enables traffic routing between them using **private IP addresses**.

- Works within the same AWS region or across regions (inter-region).
- Can be within the same AWS account or between different accounts.

### âœ… Use Cases

- Microservices hosted in different VPCs.
- Environment separation (Dev, Test, Prod) with selective access.
- Cross-account or cross-region access between teams or services.

---

## âš™ï¸ How to Set Up VPC Peering â€“ Step-by-Step

### ğŸ¯ Scenario

Weâ€™ll peer **VPC-A (10.0.0.0/16)** with **VPC-B (10.1.0.0/16)**  
Both in the same AWS region.

---

### ğŸ”§ Step 1: Create Two VPCs

1. Go to **VPC Dashboard** â†’ **Your VPCs** â†’ **Create VPC**.
2. VPC-A:
   - Name: `VPC-A`
   - CIDR: `10.0.0.0/16`
3. VPC-B:
   - Name: `VPC-B`
   - CIDR: `10.1.0.0/16`

---

### ğŸ”§ Step 2: Create Subnets and Launch EC2

- Create at least one subnet in each VPC (e.g., `10.0.1.0/24` and `10.1.1.0/24`).
- Launch an EC2 instance in each subnet for testing.

---

### ğŸ”§ Step 3: Create VPC Peering Connection

1. Go to **VPC Dashboard** â†’ **Peering Connections** â†’ **Create Peering Connection**.
2. Fill in:
   - Name tag: `VPC-A-to-VPC-B`
   - Requester: `VPC-A`
   - Accepter: `VPC-B`
3. Click **Create Peering Connection**.

---

### ğŸ”§ Step 4: Accept the Peering Request

1. Select the newly created peering request.
2. Click **Actions** â†’ **Accept Request**.

---

### ğŸ”§ Step 5: Update Route Tables

#### In VPC-A Route Table:
- Destination: `10.1.0.0/16`
- Target: `Peering Connection ID`

#### In VPC-B Route Table:
- Destination: `10.0.0.0/16`
- Target: `Peering Connection ID`

---

### ğŸ”§ Step 6: Modify Security Groups

- Allow inbound traffic **from the other VPC's CIDR**.
- Example (on EC2 in VPC-A):
  - Inbound Rule:
    - Type: All traffic (or custom)
    - Source: `10.1.0.0/16`

---

### ğŸ§ª Step 7: Test the Connection

1. SSH into EC2 in VPC-A.
2. Ping the private IP of EC2 in VPC-B:
   ```bash
   ping 10.1.1.10

AWS VPC and VPC Peering
â”œâ”€â”€ VPC
â”‚   â”œâ”€â”€ CIDR Block
â”‚   â”œâ”€â”€ Subnets
â”‚   â”œâ”€â”€ Route Table
â”‚   â”œâ”€â”€ Internet Gateway
â”‚   â””â”€â”€ Security Groups
â”œâ”€â”€ VPC Peering
â”‚   â”œâ”€â”€ Definition: Private IP communication between VPCs
â”‚   â”œâ”€â”€ Use Cases
â”‚   â”‚   â”œâ”€â”€ Microservices
â”‚   â”‚   â”œâ”€â”€ Cross-account
â”‚   â”‚   â””â”€â”€ Multi-environment
â”‚   â”œâ”€â”€ Setup
â”‚   â”‚   â”œâ”€â”€ Create VPCs
â”‚   â”‚   â”œâ”€â”€ Launch EC2s
â”‚   â”‚   â”œâ”€â”€ Create Peering
â”‚   â”‚   â”œâ”€â”€ Accept Request
â”‚   â”‚   â”œâ”€â”€ Update Route Tables
â”‚   â”‚   â”œâ”€â”€ Modify Security Groups
â”‚   â”‚   â””â”€â”€ Test Connection
â”‚   â””â”€â”€ Notes
â”‚       â”œâ”€â”€ No transitive routing
â”‚       â”œâ”€â”€ CIDRs must not overlap
â”‚       â””â”€â”€ Inter-region supporte
---
## âœ… Summary
VPC is a virtual private network in AWS.

VPC Peering connects VPCs securely over AWSâ€™s network.

Proper routing, security, and non-overlapping CIDRs are essential.

Works across regions and accounts.

